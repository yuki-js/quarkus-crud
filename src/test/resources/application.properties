# Test Database Configuration
# Dev Services automatically starts PostgreSQL container for local testing
quarkus.datasource.db-kind=postgresql

# Enable Dev Services for tests (automatic PostgreSQL container)
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.image-name=postgres:15-alpine

# Default credentials (used by Dev Services and CI)
quarkus.datasource.username=postgres
quarkus.datasource.password=postgres

# NOTE: No JDBC URL specified here - Dev Services will provide it automatically
# In CI, set QUARKUS_DATASOURCE_JDBC_URL environment variable to override Dev Services:
#   export QUARKUS_DATASOURCE_JDBC_URL=jdbc:postgresql://localhost:5432/quarkus_crud

# Flyway Configuration
quarkus.flyway.clean-at-start=true
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration

# MyBatis Configuration
mybatis.environment.id=quarkus

# JWT Configuration for tests
mp.jwt.verify.publickey.location=classpath:dev-keys/publicKey.pem
mp.jwt.verify.issuer=https://quarkus-crud.ouchiserver.aokiapp.com
mp.jwt.verify.publickey.algorithm=ES256
smallrye.jwt.sign.key.location=classpath:dev-keys/privateKey.pem
smallrye.jwt.new-token.issuer=https://quarkus-crud.ouchiserver.aokiapp.com
smallrye.jwt.new-token.lifespan=86400

# CORS Configuration for tests (matches production configuration)
quarkus.http.cors.origins=/.*/
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.access-control-allow-credentials=true
quarkus.http.cors.access-control-max-age=24H
